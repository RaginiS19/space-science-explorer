<%- include('partials/header') %>

<main>
  <h1>🚀 Upcoming SpaceX Launches</h1>

  <% if (error) { %>
    <div class="error-box"><%= error %></div>
  <% } %>

  <!-- Search Bar -->
  <label for="launchSearch"><strong>🔍 Search Launches:</strong></label>
  <input type="text" id="launchSearch" placeholder="Enter mission or rocket name..." onkeyup="filterLaunches()" />

  <!-- Launch List -->
  <ul class="launch-list">
    <% launches.forEach(launch => { %>
      <li>
        <strong><%= launch.name %></strong>
        <span><%= new Date(launch.window_start).toLocaleString() %></span>
        <span>Location: <%= launch.pad?.location?.name || 'N/A' %></span>
        <span>Rocket: <%= launch.rocket?.configuration?.name || 'N/A' %></span>
      </li>
    <% }) %>
  </ul>

  <a href="/" class="button">⬅ Back to Home</a>
</main>

<script>
  // 🔍 Search Filter
  function filterLaunches() {
    const input = document.getElementById("launchSearch").value.toLowerCase();
    const listItems = document.querySelectorAll(".launch-list li");

    listItems.forEach(item => {
      const text = item.textContent.toLowerCase();
      item.style.display = text.includes(input) ? "block" : "none";
    });
  }
</script>

<%- include('partials/footer') %>
